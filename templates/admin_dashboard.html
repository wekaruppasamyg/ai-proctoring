<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard | AI Exam Proctoring</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
:root{
    --primary:#8b5cf6; /* Purple */
    --secondary:#6d28d9; /* Darker Purple */
    --dark:#000000; /* Black */
    --bg:#000000; /* Black background */
    --sidebar:#8b5cf6; /* Purple for sidebar */
    --card:#2a2a2a; /* Darker card */
    --text:#ffffff; /* White text */
    --accent:#4a4a4a; /* Gray accent */
    --danger:#ff0000; /* Red for delete */
    --success:#00ff00; /* Green for success */
    --glass:rgba(255,255,255,0.05);
}

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    background:var(--bg);
    color:var(--text);
    min-height:100vh;
    animation:fadeIn 0.8s ease;
}

@keyframes fadeIn{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}

/* ================= LAYOUT ================= */
.wrapper{
    display:flex;
    min-height:100vh;
}

/* ================= SIDEBAR ================= */
.sidebar{
    width:260px;
    background:linear-gradient(180deg,var(--sidebar),var(--secondary)); /* Purple gradient */
    color:var(--text);
    padding:20px;
    position:fixed;
    height:100%;
    box-shadow:2px 0 20px rgba(0,0,0,0.5);
    animation:slideInLeft 0.6s ease;
}

@keyframes slideInLeft{
    from{transform:translateX(-100%);}
    to{transform:translateX(0);}
}

.logo{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:40px;
}

.logo img{
    width:40px;
    height:40px;
    border-radius:50%;
    box-shadow:0 0 15px rgba(255,255,255,0.3);
    animation:pulse 2s infinite;
}

@keyframes pulse{
    0%,100%{transform:scale(1);}
    50%{transform:scale(1.05);}
}

.logo span{
    font-size:20px;
    font-weight:600;
    color:#fff;
    text-shadow:0 0 10px rgba(255,255,255,0.5);
}

.menu a{
    display:flex;
    align-items:center;
    gap:12px;
    padding:14px 16px;
    margin-bottom:14px;
    text-decoration:none;
    color:var(--text);
    border-radius:12px;
    transition:0.4s;
    border:1px solid transparent;
}

.menu a:hover{
    background:linear-gradient(135deg,var(--dark),#333333);
    color:#fff;
    transform:translateX(5px);
    box-shadow:0 5px 15px rgba(0,0,0,0.5);
}

.logout{
    background:linear-gradient(135deg,var(--danger),#cc0000);
}

.logout:hover{
    background:linear-gradient(135deg,#cc0000,var(--danger));
    transform:translateX(5px);
    box-shadow:0 5px 15px rgba(255,0,0,0.5);
}

/* ================= MAIN ================= */
.main{
    margin-left:260px;
    width:100%;
    animation:slideUp 0.8s ease 0.2s both;
}

@keyframes slideUp{
    from{opacity:0; transform:translateY(30px);}
    to{opacity:1; transform:translateY(0);}
}

/* TOP BAR */
.topbar{
    background:linear-gradient(135deg,var(--sidebar),var(--secondary)); /* Purple gradient */
    padding:18px 30px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 20px rgba(0,0,0,0.5);
    border-bottom:1px solid var(--accent);
    animation:bounceIn 0.6s ease;
}

@keyframes bounceIn{
    0%{transform:scale(0.3); opacity:0;}
    50%{transform:scale(1.05);}
    70%{transform:scale(0.9);}
    100%{transform:scale(1); opacity:1;}
}

.topbar h2{
    font-size:22px;
    color:#fff;
}

.topbar span{
    color:#fff;
    font-weight:500;
}

/* CONTENT */
.content{
    padding:30px;
}

.content h2{
    margin-bottom:20px;
    color:var(--primary);
    font-weight:600;
    text-shadow:0 0 10px rgba(139,92,246,0.5);
}

/* DASHBOARD CARDS */
.cards{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:25px;
}

.card{
    background:linear-gradient(135deg,var(--card),rgba(42,42,42,0.8));
    padding:25px;
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    transition:0.4s;
    border:1px solid rgba(255,255,255,0.1);
    backdrop-filter:blur(10px);
    animation:zoomIn 0.6s ease both;
}

@keyframes zoomIn{
    from{transform:scale(0.9); opacity:0;}
    to{transform:scale(1); opacity:1;}
}

.card:hover{
    transform:translateY(-5px);
    box-shadow:0 15px 40px rgba(0,0,0,0.7);
}

.card h3{
    font-size:18px;
    margin-bottom:10px;
    color:var(--text);
}

.card p{
    font-size:14px;
    color:#cccccc;
    margin-bottom:20px;
}

.card a{
    text-decoration:none;
    font-size:14px;
    color:#000;
    font-weight:600;
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    padding:10px 20px;
    border-radius:25px;
    transition:0.4s;
    box-shadow:0 5px 15px rgba(139,92,246,0.4);
}

.card a:hover{
    background:linear-gradient(135deg,var(--secondary),var(--primary));
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(139,92,246,0.6);
}

/* ACCORDION STYLING */
.accordion {
    margin-bottom: 10px;
}

.accordion-header {
    background:linear-gradient(135deg,var(--accent),#555555);
    padding:15px;
    cursor:pointer;
    border-radius:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    transition:0.4s;
    border:1px solid rgba(255,255,255,0.1);
}

.accordion-header:hover {
    background:linear-gradient(135deg,#555555,var(--accent));
    transform:translateX(5px);
}

.accordion-content {
    display:none;
    padding:15px;
    background:linear-gradient(135deg,var(--dark),#333333);
    border-radius:0 0 12px 12px;
    margin-top:5px;
    border:1px solid rgba(255,255,255,0.1);
    animation:fadeInDown 0.4s ease;
}

@keyframes fadeInDown{
    from{opacity:0; transform:translateY(-10px);}
    to{opacity:1; transform:translateY(0);}
}

.accordion-content p {
    margin-bottom:10px;
    color:#cccccc;
}

.options {
    margin-bottom:10px;
}

.options div {
    margin-bottom:5px;
}

.correct-answer {
    color:var(--success);
    font-weight:bold;
}

/* BUTTONS */
button{
    transition:0.4s;
}

button:hover{
    transform:scale(1.05);
    box-shadow:0 5px 15px rgba(0,0,0,0.5);
}

/* ================= RESPONSIVE ================= */
@media(max-width:900px){
    .sidebar{
        width:220px;
    }
    .main{
        margin-left:220px;
    }
}

@media(max-width:768px){
    .sidebar{
        position:relative;
        width:100%;
        height:auto;
    }
    .main{
        margin-left:0;
    }
    .wrapper{
        flex-direction:column;
    }
}
</style>
</head>

<body>

<div class="wrapper">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
        <div class="logo">
            <!-- Replace logo -->
            <img src="/static/home.jpg" alt="Logo">
            <span>AI Proctor</span>
        </div>

        <nav class="menu">
            <a href="/add-subjects"><i class="fas fa-plus-circle"></i> Add Subjects</a>
            <a href="/add-questions"><i class="fas fa-edit"></i> Add Questions</a>
            <a href="/manage-materials"><i class="fas fa-file-alt"></i> Manage Materials</a>
            <a href="/admin-results"><i class="fas fa-chart-bar"></i> View Results</a>
            <a href="/admin-live-monitor"><i class="fas fa-video"></i> Live Monitoring</a>
            <a href="/admin-logout" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
            
        </nav>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="main">
        <div class="topbar">
            <h2><i class="fas fa-crown"></i> Admin Dashboard</h2>
            <span>Welcome, Admin</span>
        </div>

        <div class="content">
            <h2><i class="fas fa-book"></i> Subjects and Questions</h2>
            {% if subject_data %}
                {% for subject in subject_data %}
                    <div class="card" style="margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3><i class="fas fa-graduation-cap"></i> Subject: {{ subject.name }} {% if subject.enabled %} <span style="color: var(--success);">(Enabled)</span> {% else %} <span style="color: var(--danger);">(Locked)</span> {% endif %}</h3>
                            <div>
                                <form method="POST" action="{{ url_for('toggle_subject', subject_id=subject.id) }}" style="display: inline; margin-right: 10px;">
                                    <button type="submit" style="background: linear-gradient(135deg,var(--primary),var(--secondary)); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; box-shadow: 0 5px 15px rgba(139,92,246,0.3);"><i class="fas fa-toggle-on"></i> {% if subject.enabled %}Lock{% else %}Enable{% endif %}</button>
                                </form>
                                <form method="POST" action="{{ url_for('delete_subject') }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this subject and all its questions?')">
                                    <input type="hidden" name="subject_id" value="{{ subject.id }}">
                                    <button type="submit" style="background: linear-gradient(135deg,var(--danger),#cc0000); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; box-shadow: 0 5px 15px rgba(255,0,0,0.3);"><i class="fas fa-trash"></i> Delete Subject</button>
                                </form>
                            </div>
                        </div>
                        {% if subject.questions %}
                            {% for q in subject.questions %}
                            <div class="accordion">
                                <div class="accordion-header" onclick="toggleAccordion(this)">
                                    <span>{{ q.question }}</span>
                                    <span class="arrow"><i class="fas fa-chevron-down"></i></span>
                                </div>
                                <div class="accordion-content">
                                    <div class="options">
                                        <p><strong>Options:</strong></p>
                                        {% for opt in q.options %}
                                            <div>{{ opt }}</div>
                                        {% endfor %}
                                    </div>
                                    <p class="correct-answer">Correct Answer: {{ q.correct_answer }}</p>
                                    <form method="POST" action="{{ url_for('delete_question') }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this question?')">
                                        <input type="hidden" name="question_id" value="{{ q.id }}">
                                        <button type="submit" style="background: linear-gradient(135deg,var(--danger),#cc0000); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; box-shadow: 0 3px 10px rgba(255,0,0,0.3);"><i class="fas fa-trash"></i> Delete</button>
                                    </form>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <p style="color:#cccccc;">No questions for this subject.</p>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                <p style="color:#cccccc;">No subjects found.</p>
            {% endif %}
        </div>
    </main>

</div>

</body>
</html>